<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BookHook</title>
<style>
:root{
  --bg:#f7f7f8; --fg:#111; --muted:#6b7280;
  --card:#fff; --line:#e5e7eb; --pill:#f5f5f5;
  --accent:#000; --accentfg:#fff; --gold:#E7C200;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}

/* shell */
.wrap{max-width:980px;margin:0 auto;padding:18px 14px}
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;margin:12px 0;box-shadow:0 1px 8px rgba(0,0,0,.03)}
h1,h2{margin:0 0 10px}
.muted{color:var(--muted);font-size:14px}
.divider{height:1px;background:var(--line);margin:12px 0}

/* top status */
.bar{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:#fff;border-bottom:1px solid var(--line);position:sticky;top:0;z-index:3}
.nav{display:flex;gap:8px;flex-wrap:wrap}
.btn{padding:10px 14px;border-radius:999px;border:1px solid var(--line);background:#fff;cursor:pointer;font-weight:600}
.btn.small{font-size:12px;padding:6px 10px}
.btn.gold{background:var(--gold);border-color:#caa900;color:#000}
.badge{padding:4px 10px;border-radius:999px;border:1px solid var(--line);background:#fff;font-weight:600;font-size:12px}
.badge.gold{background:#fff7cc;border-color:#E7C200}

/* logo + tagline */
.hero{display:flex;flex-direction:column;align-items:center;gap:8px;padding:22px 12px}
.logo{height:56px}
.tag{color:var(--muted);font-weight:600}

/* inputs */
.row{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:8px 0}
.lbl{min-width:120px;color:var(--muted)}
.pills{display:flex;flex-wrap:wrap;gap:8px}
.pill{padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:var(--pill);cursor:pointer}
.pill.on{background:#111;color:#fff;border-color:#111}
.field{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:10px;background:#fff;font:inherit}

/* discover swipe card */
.swipe{display:grid;grid-template-columns:210px 1fr;gap:16px}
@media (max-width:740px){.swipe{grid-template-columns:1fr}}
.cover{width:100%;aspect-ratio:2/3;border-radius:12px;overflow:hidden;background:#e5e7eb;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:48px}
.cover img{width:100%;height:100%;object-fit:cover;display:block}
.chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px;align-items:center}
.chip{padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#fafafa;font-size:13px;display:inline-flex}
.hint{background:#fff7cc;border:1px solid #E7C200;padding:6px 10px;border-radius:999px;font-weight:600;font-size:12px}

/* swipe gestures */
.card-gesture{position:relative;touch-action:pan-y;user-select:none;will-change:transform}
.badge-swipe{position:absolute;top:10px;padding:6px 10px;border-radius:8px;font-weight:700;border:2px solid;background:rgba(255,255,255,.9);opacity:0;transition:opacity .15s}
.badge-swipe.like{left:10px;color:#0a6a0a;border-color:#0a6a0a}
.badge-swipe.nope{right:10px;color:#cc1b1b;border-color:#cc1b1b}

/* shelf tiles (profile) */
.list{display:flex;flex-direction:column;gap:10px}
.tile{display:grid;grid-template-columns:64px 1fr auto;gap:12px;align-items:center;padding:10px;border:1px solid var(--line);border-radius:12px;background:#fff}
.tile .thumb{width:64px;height:96px;border-radius:8px;background:#eee;overflow:hidden}
.thumb img{width:100%;height:100%;object-fit:cover}
.stat{padding:4px 8px;border-radius:999px;border:1px solid var(--line);background:#f6f6f6;font-size:12px}
.stat.want{background:#eef3ff;border-color:#cfe1ff}
.stat.reading{background:#eaf8ed;border-color:#b8e4c3}
.stat.read{background:#fff0d2;border-color:#f7dc8a}
</style>
</head>
<body>
  <!-- top bar -->
  .hero_logo {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: 22px;
  font-weight: 700;
}

.logo-text {
  color: #000;
}

.tagline {
  text-align: center;
  margin: 6px 0 20px;
  font-size: 14px;
  color: #555;
  font-style: italic;
}

  <main class="wrap">
    <!-- HERO: original black logo + tagline (no upload needed) -->
    <section class="hero">
      <!-- “original black logo” — solid black with a white hook mark -->
      <svg class="logo" viewBox="0 0 260 60" xmlns="http://www.w3.org/2000/svg" aria-label="BookHook">
        <rect x="4" y="8" width="48" height="48" rx="12" fill="#000"/>
        <!-- stylized hook -->
        <path d="M28 22c-4.2 0-7.6 3.4-7.6 7.6s3.4 7.6 7.6 7.6c2.3 0 4.4-.9 5.9-2.5
                 1.1-1.1 2.9-1.1 4 0s1.1 2.9 0 4c-2.4 2.5-5.8 4-9.9 4-8.1 0-14.6-6.6-14.6-14.6S19.9 14 28 14
                 c5.9 0 10.8 3.1 13.2 7.7 1.1 2-1 4.3-3.1 3.5-2.3-.9-5-1.2-7-.2-1.5.8-3.3-1.2-2.2-2.6 1.8-2.3 4.9-3.1 7.7-3.1-2.4-1.9-5.4-3.1-8.6-3.1z"
              fill="#fff"/>
        <text x="64" y="42" font-family="system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif"
              font-weight="800" font-size="28" fill="#111">BookHook</text>
      </svg>
      <div id="rotTag" class="tag">Swipe books by how you want to feel</div>
    </section>

    <!-- How I’m feeling (first, as requested) -->
    <section class="card">
      <h2>How I’m feeling</h2>
      <div class="row">
        <input id="freeMood" class="field" placeholder="I am feeling … (tired, anxious, pumped…)" />
        <button class="btn" onclick="mapFreeMood()">Set</button>
      </div>
      <div class="row">
        <span class="lbl">Level:</span>
        <div id="moodLvl" class="pills" aria-label="Mood level"></div>
      </div>
      <div class="muted">Type anything (“overwhelmed”, “hyped”) or tap a level. This nudges your matches.</div>
    </section>

    <!-- Desired Mood (second) -->
    <section class="card">
      <h2>Desired Mood</h2>
      <div id="desired" class="pills" aria-label="What vibe you want from a book"></div>
      <div class="muted">Choose a few — these steer the match score below.</div>
    </section>

    <!-- Discover (then motto line) -->
    <section class="card" id="discover">
      <h2>Discover</h2>
      <div class="muted" style="margin:-2px 0 8px">Dream Big · Do Ridiculous · Achieve Remarkable</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
        <span class="hint">Swipe left: Want</span>
        <span class="hint">Swipe right: Reading</span>
        <span class="hint">Tap “Already read” to add HookMarks</span>
      </div>
      <div id="swipe" class="swipe"></div>
    </section>

    <!-- small shelf note on home (full list in Profile) -->
    <section class="card" id="shelfSection">
      <h2>Your Shelf</h2>
      <div class="muted">Save or swipe to add books. Full list is in <a href="#profile" onclick="showSection('profile')">My Profile</a>.</div>
    </section>

    <!-- HookMarks placeholder -->
    <section class="card" id="hookmarks" style="display:none">
      <h2>HookMarks</h2>
      <div class="muted">No HookMarks yet. Mark a book “Already read” and add one!</div>
    </section>

    <!-- Profile (full shelf) -->
    <section class="card" id="profile" style="display:none">
      <h2>My Profile</h2>
      <div class="row" style="justify-content:space-between;align-items:center">
        <div class="muted"><b>Role:</b> <span id="profileRole">Reader</span> · <b>Points:</b> <span id="profilePts">0</span></div>
      </div>
      <div style="height:6px"></div>
      <h3>Your Bookshelf</h3>
      <div id="shelf" class="list muted">Save a book to see it here.</div>
    </section>
  </main>

<script>
/* ===== Rotating tagline ===== */
const TAGS = [
  "Swipe books by how you want to feel",
  "Match readers ↔ authors by vibe",
  "Collect HookMarks for LOLs & AHAs",
  "Turn pages → real-world wins"
];
let tagIdx = 0;
setInterval(()=>{ document.getElementById('rotTag').textContent = TAGS[(++tagIdx)%TAGS.length]; }, 4200);

/* ===== Input chips ===== */
const MOOD_LEVELS = ["Low","Medium","High"];
const DESIRED = ["Restful","Reflective","Insightful","Empowering","Intriguing","Educational","Comedic","Silly","Inspiring","Arousing","Uplifting","Self-loving","Entrepreneurial"];

const MOOD_MAP = {
  low:["sad","down","tired","drained","anxious","overwhelmed","lonely","stressed","meh"],
  medium:["ok","fine","neutral","calm","grounded","chill","steady"],
  high:["happy","joyful","excited","energized","pumped","hyped","curious","inspired","motivated"]
};

const state = {
  moodLevel:new Set(), desired:new Set(),
  pts:Number(localStorage.getItem("bh_pts")||0),
  shelf:JSON.parse(localStorage.getItem("bh_shelf")||"[]"),
  order:[]
};

document.addEventListener("DOMContentLoaded",()=>{
  document.getElementById("pts").textContent = state.pts + " pts";
  document.getElementById("profilePts").textContent = state.pts;
  renderPills("moodLvl", MOOD_LEVELS, state.moodLevel);
  renderPills("desired", DESIRED, state.desired);
  refreshMatches(); show(0); renderShelf();
});

function renderPills(id, items, set){
  const box = document.getElementById(id); box.innerHTML="";
  items.forEach(name=>{
    const b = document.createElement("button");
    b.className="pill"; b.textContent=name;
    b.addEventListener("click",()=>{
      if(set.has(name)){set.delete(name); b.classList.remove("on");}
      else{set.add(name); b.classList.add("on");}
      refreshMatches(); show(0);
    });
    box.appendChild(b);
  });
}
function mapFreeMood(){
  const t=(document.getElementById("freeMood").value||"").toLowerCase().trim();
  if(!t) return;
  const hit=(arr)=>arr.some(w=>t.includes(w));
  state.moodLevel.clear();
  if(hit(MOOD_MAP.high)) state.moodLevel.add("High");
  else if(hit(MOOD_MAP.low)) state.moodLevel.add("Low");
  else state.moodLevel.add("Medium");
  document.querySelectorAll("#moodLvl .pill").forEach(p=>{
    p.classList.toggle("on", state.moodLevel.has(p.textContent));
  });
  refreshMatches(); show(0);
}

/* ===== Data (remove image to auto-fetch) ===== */
const BOOKS = [
  { id:"rid",
    title:"The Ridiculous: Book 1",
    author:"Jef & Mindy",
    vibes:["Funny","Satirical","Empowering","Chill","Feel-good"],
    facts:{pace:"Medium", pages:312, year:2024},
    gold:true,
    image:null, // let resolver fetch real cover
    links:{site:"#",buy:"#"}
  },
  { id:"mag",
    title:"Magical Adventures of Lori & Bonnie B. Bunny",
    author:"Elaine Blackstien",
    vibes:["Inspiring","Playful","Comedic","Uplifting"],
    facts:{pace:"Fast", pages:248, year:2025},
    image:null,
    links:{buy:"#"}
  },
  { id:"coz",
    title:"Star Soup & Cozy Skies",
    author:"L. Nova",
    vibes:["Calm","Cozy","Comforted","Reflective"],
    facts:{pace:"Slow", pages:220, year:2021},
    image:null,
    links:{buy:"#"}
  }
];

/* ===== Matching (simple, vibe-based) ===== */
function score(b){
  const inter=(arr,set)=>arr.filter(x=>set.has(x)).length;
  let s = inter(b.vibes||[], state.desired)*1.4;
  if(b.gold) s+=2.5;
  return s;
}
function refreshMatches(){ state.order=[...BOOKS].sort((a,b)=>score(b)-score(a)); }

/* ===== Discover swipe ===== */
function show(idx){
  if(!state.order.length){ document.getElementById("swipe").innerHTML='<div class="muted">No books yet.</div>'; return; }
  const b = state.order[idx%state.order.length];
  const el = document.getElementById("swipe");

  const chips=[
    ...(b.vibes||[]),
    b.facts?.pace,
    b.facts?.pages?`${b.facts.pages}p`:null,
    b.facts?.year?`Since ${b.facts.year}`:null
  ].filter(Boolean);

  const cover = b.image
    ? `<div class="cover"><img id="coverImg" src="${b.image}" alt="Cover of ${escapeHtml(b.title)}"></div>`
    : `<div class="cover"><img id="coverImg" alt="Cover of ${escapeHtml(b.title)}" style="display:none"></div>`;

  el.innerHTML = `
    <div id="swipeCard" class="card-gesture swipe">
      ${cover}
      <div>
        <div class="row" style="justify-content:space-between;align-items:center">
          <div>${b.gold?'<span class="chip" style="background:#fff7cc;border-color:#E7C200">⭐ Featured</span>':''}</div>
          <div class="badge gold" id="ptsTop">${state.pts} pts</div>
        </div>
        <h2 style="margin:6px 0 4px">${escapeHtml(b.title)}</h2>
        <div class="muted">by ${escapeHtml(b.author)}</div>
        <div class="chips">${chips.map(c=>`<span class="chip">${escapeHtml(c)}</span>`).join('')}</div>
        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn" onclick="want('${b.id}')">Want (+5)</button>
          <button class="btn gold" onclick="reading('${b.id}')">Reading (+7)</button>
          <button class="btn" onclick="already('${b.id}')">Already read</button>
        </div>
        <div class="divider"></div>
        <div class="muted">Author · ${escapeHtml(b.author)} ${b.links?.site?`· <a class="link" href="${b.links.site}">Website</a>`:''} ${b.links?.buy?`· <a class="link" href="${b.links.buy}">Buy</a>`:''}</div>
        <span class="badge-swipe like">SAVE</span>
        <span class="badge-swipe nope">NOPE</span>
      </div>
    </div>
  `;

  // swipe behavior
  addSwipe(document.getElementById("swipeCard"), ()=>want(b.id), ()=>reading(b.id));

  // resolve cover if needed (or failed)
  const imgEl = document.getElementById("coverImg");
  if(!b.image){ resolveCover(b).then(url=>{ if(url){ b.image=url; setImg(imgEl,url,b.title); } }); }
  imgEl.onerror = ()=>{ // try again if a broken URL
    resolveCover(b,true).then(url=>{ if(url){ b.image=url; setImg(imgEl,url,b.title); }});
  };
}
function setImg(el,url,title){ if(!el) return; el.src=url; el.alt=`Cover of ${escapeHtml(title)}`; el.style.display="block"; }

function addSwipe(el,onLeft,onRight){
  let startX=0, dx=0, drag=false; const th=80;
  const like=el.querySelector('.badge-swipe.like'), nope=el.querySelector('.badge-swipe.nope');
  const down=e=>{drag=true; startX=(e.clientX??e.touches?.[0]?.clientX); el.style.transition='';};
  const move=e=>{ if(!drag) return; dx=(e.clientX??e.touches?.[0]?.clientX)-startX; const r=dx/14; el.style.transform=`translateX(${dx}px) rotate(${r}deg)`; const a=Math.min(1,Math.abs(dx)/120); if(dx>0){ if(like) like.style.opacity=a; if(nope) nope.style.opacity=0;} else { if(nope) nope.style.opacity=a; if(like) like.style.opacity=0;} };
  const up=()=>{ if(!drag) return; drag=false; if(dx> th){ el.style.transition='transform .2s'; el.style.transform='translateX(500px) rotate(15deg)'; setTimeout(onRight,160);} else if(dx< -th){ el.style.transition='transform .2s'; el.style.transform='translateX(-500px) rotate(-15deg)'; setTimeout(onLeft,160);} else { el.style.transition='transform .2s'; el.style.transform='translateX(0) rotate(0)'; if(like) like.style.opacity=0; if(nope) nope.style.opacity=0; } };
  el.addEventListener('pointerdown',down); el.addEventListener('pointermove',move); el.addEventListener('pointerup',up); el.addEventListener('pointercancel',up);
}

/* ===== Actions & shelf ===== */
function want(id){ saveToShelf(id,'want',5); pass(); }
function reading(id){ saveToShelf(id,'reading',7); pass(); }
function already(id){ saveToShelf(id,'read',10); alert("Great! Add a HookMark (LOL, AHA, Breakthrough) later."); pass(); }
function pass(){ state.order.push(state.order.shift()); show(0); }

function saveToShelf(id,status,pts){
  const b=BOOKS.find(x=>x.id===id); if(!b) return;
  const e=state.shelf.find(x=>x.id===id);
  if(e){ e.status=status; e.image=e.image||b.image||""; }
  else state.shelf.unshift({id:b.id,title:b.title,author:b.author,image:b.image||"",status});
  localStorage.setItem("bh_shelf", JSON.stringify(state.shelf));
  renderShelf(); addPts(pts);
}
function renderShelf(){
  const box=document.getElementById("shelf"); if(!box) return;
  if(!state.shelf.length){ box.classList.add("muted"); box.textContent="Save a book to see it here."; return; }
  box.classList.remove("muted");
  box.innerHTML=state.shelf.map(b=>`
    <div class="tile">
      <div class="thumb">${b.image?`<img src="${b.image}" alt="">`:""}</div>
      <div>
        <div><b>${escapeHtml(b.title)}</b></div>
        <div class="muted">by ${escapeHtml(b.author)}</div>
      </div>
      <span class="stat ${b.status}">${b.status}</span>
    </div>`).join("");
}
function addPts(n){
  state.pts += n;
  localStorage.setItem("bh_pts", state.pts);
  document.getElementById("pts").textContent = state.pts + " pts";
  const top=document.getElementById("ptsTop"); if(top) top.textContent = state.pts + " pts";
}
function showSection(id){
  ["discover","hookmarks","profile"].forEach(s=>{
    const el=document.getElementById(s);
    if(el) el.style.display=(s===id)?"":"none";
  });
  if(id==="profile") renderShelf();
}

/* ===== Cover resolver (robust) ===== */
async function resolveCover(book,secondTry=false){
  // 1) Google Books (title+author, then title only)
  try{
    const tryQueries = [
      `intitle:${book.title} inauthor:${book.author||""}`,
      `intitle:${book.title}`
    ];
    for(const qRaw of tryQueries){
      const q=encodeURIComponent(qRaw);
      const res=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${q}&maxResults=1`);
      if(res.ok){
        const data=await res.json();
        const link=data?.items?.[0]?.volumeInfo?.imageLinks;
        const img = link?.thumbnail || link?.smallThumbnail;
        if(img) return img.replace('http://','https://');
      }
    }
  }catch(e){ /* ignore */ }

  // 2) Open Library search → cover id
  try{
    const q=encodeURIComponent(book.title);
    const res=await fetch(`https://openlibrary.org/search.json?title=${q}&limit=1`);
    if(res.ok){
      const data=await res.json();
      const cid=data?.docs?.[0]?.cover_i;
      if(cid) return `https://covers.openlibrary.org/b/id/${cid}-L.jpg`;
    }
  }catch(e){ /* ignore */ }

  // no cover
  return null;
}

/* ===== Utils ===== */
function escapeHtml(s){return String(s||'').replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[m]))}
</script>
</body>
</html>
